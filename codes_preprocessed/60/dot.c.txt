#include "common.h" #if defined(DSDOT) double CNAME(BLASLONG n, FLOAT *x, BLASLONG inc_x, FLOAT *y, BLASLONG inc_y) #else FLOAT CNAME(BLASLONG n, FLOAT *x, BLASLONG inc_x, FLOAT *y, BLASLONG inc_y) #endif { BLASLONG i=0; BLASLONG ix=0,iy=0; #if defined(DSDOT) double dot = 0.0 ; #else FLOAT dot = 0.0 ; #endif if ( n < 0 ) return(dot); if ( (inc_x == 1) && (inc_y == 1) ) { int n1 = n & -4; while(i < n1) { #if defined(DSDOT) dot += (double) y[i] * (double) x[i] + (double) y[i+1] * (double) x[i+1] + (double) y[i+2] * (double) x[i+2] + (double) y[i+3] * (double) x[i+3] ; #else dot += y[i] * x[i] + y[i+1] * x[i+1] + y[i+2] * x[i+2] + y[i+3] * x[i+3] ; #endif i+=4 ; } while(i < n) { #if defined(DSDOT) dot += (double) y[i] * (double) x[i] ; #else dot += y[i] * x[i] ; #endif i++ ; } return(dot); } while(i < n) { #if defined(DSDOT) dot += (double) y[iy] * (double) x[ix] ; #else dot += y[iy] * x[ix] ; #endif ix += inc_x ; iy += inc_y ; i++ ; } return(dot); }